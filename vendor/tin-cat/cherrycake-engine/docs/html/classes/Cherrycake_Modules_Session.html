<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html SYSTEM "about:legacy-compat">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>phpDox - Cherrycake\Modules\Session</title>
    <link rel="stylesheet" type="text/css" href="../css/style.css" media="screen"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  </head>
  <body>
    <nav class="topnav">
      <ul>
        <li>
          <div class="logo"><span>/**</span>phpDox</div>
        </li>
        <li class="separator">
          <a href="../index.html">Overview</a>
        </li>
        <li class="separator">
          <a href="../namespaces.html">Namespaces</a>
        </li>
        <li>
          <a href="../interfaces.html">Interfaces</a>
        </li>
        <li>
          <a href="../classes.html">Classes</a>
        </li>
        <li class="separator">
          <a href="../source/index.html">Source</a>
        </li>
      </ul>
    </nav>
    <div id="mainstage">
      <div class="box">
        <ul class="breadcrumb">
          <li>
            <a href="../index.html">Overview</a>
          </li>
          <li class="separator">
            <a href="../classes.html">Classes</a>
          </li>
          <li class="separator">
            <a href="../classes.html#Cherrycake_Modules">Cherrycake\Modules</a>
          </li>
          <li class="separator">Session</li>
        </ul>
      </div>
      <nav class="box">
        <ul>
          <li>
            <a href="#introduction">Introduction</a>
          </li>
          <li>
            <a href="#synopsis">Synopsis</a>
          </li>
          <li>
            <a href="#hierarchy">Hierarchy</a>
          </li>
          <li>
            <a href="#members">Members</a>
          </li>
          <li>
            <a href="#methods">Methods</a>
          </li>
          <li>
            <a href="../source/modules/Session/Session.class.php.html#line49">Source</a>
          </li>
        </ul>
      </nav>
      <section>
        <h1 id="introduction"><small>Cherrycake\Modules\</small>Session</h1>
        <h4>Session</h4>
        <p>Implements a base session management for the visitor.<br/>It uses the DB table cherrycake_session to store sessions, but caches them on the provided CacheProvider<br/>The session identifier is the "id" field on the table, being a 128 hexadecimal characters tinytext, primary key, giving a huge amount of possible session ids<br/>Session ids are generated by MD5ing a randomly generated stringified number, effectively giving an almost unpredictable session id in order to avoid session hijacking.<br/>Repeated session ids are _not_ checked because the probability of getting a collision is so low (1 out of 1 septillion) that it's preferrable to have that security bug instead to having to perform that additional check on each newly created session.<br/>To maximize performance, sessions are not allowed to store frequently changing data, so sessions are almost always taken from cache and no database access is performed unless a data change is needed.<br/>A data storage mechanism is provided to store basic information within each session.<br/>The data is stored as a serialized array on the "data" field. When requesting an update of this data, the cache is flushed so it will generate an additional database hit on the next request.<br/><br/>Important note: The sessions table must be maintained often in order to remove old sessions. Otherwise, a point will be reached where all possible session ids are used, and the module will remove the oldest session from the database in order to make room for the new one, effectively generating stress on the database.<br/>The JanitorTaskSession is required to be run in order to do this maintenance work, so be sure to add it to janitor.config.php<br/><br/>It takes configuration from the App-layer configuration file. See there to find available configuration options.<br/><br/>Configuration example for session.config.php:<br/>&lt;code&gt;<br/>$securityConfig = [<br/>"cachePrefix" =&gt; "Session", // The cache prefix to use when storing sessions into cache<br/>"sessionCacheProviderName" =&gt; "fast", // The name of the cache provider to use to store sessions and the counter of created sessions<br/>"sessionCacheTtl" =&gt; \Cherrycake\Modules\CACHE_TTL_SHORT, // The TTL of cached sessions. Should be small because if a session is removed from the database and the user keeps accessing the site with that session, his session will be accepted because it's still in cache.<br/>"sessionDatabaseProviderName" =&gt; "main", // The name of the DatabaseProvider to use for storing sessions<br/>"sessionTableName" =&gt; "cherrycake_session", // The name of the table used to store sessions<br/>"cookieName" =&gt; "cherrycake", // The name of the cookie. Recommended to be set at the config file level.<br/>"cookiePath" =&gt; "/", // The path of the cookie. If set to "/", it will be available within the entire domain<br/>"cookieDomain" =&gt; "", // Must be set at config-level to the domain on which the session cookie must function. Usually something like ".domain.com" to make it work for all subdomains<br/>"cookieSecure" =&gt; false, // If set to true, the cookie will only be sent when a secure connection (SSL) is present<br/>"cookieHttpOnly" =&gt; false, // If set to true, the cookie only will be sent when an HTTP request is made.<br/>"sessionDuration" =&gt; false, // The duration of the session in seconds. If set to zero, the session will last until the browser is closed.<br/>"isSessionRenew" =&gt; true, // When set to true, the duration of the session will be renewed to a new sessionDuration. If set to false, the cookie will expire after sessionDuration, no matter how many times the session is requested.<br/>];<br/>&lt;/code&gt;</p>
        <ul/>
        <h2 id="synopsis">Synopsis</h2>
        <div class="synopsis">class Session
                extends <a title="Cherrycake\Module" href="../classes/Cherrycake_Module.html">Module</a>
            {<br/><ul class="none"><li>// members</li><li>public array <a href="#members">$config</a> =
                        ;
                    </li><li>public array <a href="#members">$dependentCherrycakeModules</a> =
                        ;
                    </li><li>private  <a href="#members">$sessionId</a>;
                    </li><li>private  <a href="#members">$sessionData</a>;
                    </li></ul><ul class="none"><li>// Inherited members from <span title="Cherrycake\Module">Module</span></li><li>protected <span title="Cherrycake\bool">bool</span> <a href="#members">$isConfigFile</a>;
                        </li><li>protected  <a href="#members">$config</a>;
                        </li><li>protected  <a href="#members">$dependentCherrycakeModules</a>;
                        </li><li>protected  <a href="#members">$dependentAppModules</a>;
                        </li></ul><ul class="none"><li>// methods</li><li>public boolean <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/init.html">init</a>()
                    </li><li>public boolean <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/loadSessionCookie.html">loadSessionCookie</a>()
                    </li><li>public bool <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/isSession.html">isSession</a>()
                    </li><li>public string <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getSessionId.html">getSessionId</a>()
                    </li><li>public boolean <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/newSession.html">newSession</a>()
                    </li><li>public string <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getClientIp.html">getClientIp</a>()
                    </li><li>public string <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getClientBrowserString.html">getClientBrowserString</a>()
                    </li><li>public bool <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/sendSessionCookie.html">sendSessionCookie</a>()
                    </li><li>public bool <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/renewSessionCookie.html">renewSessionCookie</a>()
                    </li><li>public bool <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/removeSessionCookie.html">removeSessionCookie</a>()
                    </li><li>public mixed <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/generateNewSessionId.html">generateNewSessionId</a>()
                    </li><li>public string <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getSessionCacheKey.html">getSessionCacheKey</a>()
                    </li><li>public boolean <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/isSessionExistsOnCache.html">isSessionExistsOnCache</a>()
                    </li><li>public boolean <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/loadSessionData.html">loadSessionData</a>()
                    </li><li>public boolean <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/isSessionData.html">isSessionData</a>()
                    </li><li>public mixed <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getSessionData.html">getSessionData</a>()
                    </li><li>public bool <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/setSessionData.html">setSessionData</a>()
                    </li><li>public mixed <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/__get.html">__get</a>()
                    </li><li>public bool <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/__set.html">__set</a>()
                    </li><li>public void <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/__isset.html">__isset</a>()
                    </li><li>public bool <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/removeSessionData.html">removeSessionData</a>()
                    </li><li>public bool <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/resetSessionCache.html">resetSessionCache</a>()
                    </li><li>public string <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/debug.html">debug</a>()
                    </li></ul><ul class="none"><li>// Inherited methods from <span title="Cherrycake\Module">Module</span></li><li>public void <a title="Cherrycake\Module" href="../classes/Cherrycake_Module/loadConfigFile.html">loadConfigFile</a>()
                        </li><li>public void <a title="Cherrycake\Module" href="../classes/Cherrycake_Module/config.html">config</a>()
                        </li><li>public mixed <a title="Cherrycake\Module" href="../classes/Cherrycake_Module/getConfig.html">getConfig</a>()
                        </li><li>public void <a title="Cherrycake\Module" href="../classes/Cherrycake_Module/setConfig.html">setConfig</a>()
                        </li><li>public boolean <a title="Cherrycake\Module" href="../classes/Cherrycake_Module/loadDependencies.html">loadDependencies</a>()
                        </li><li>public static void <a title="Cherrycake\Module" href="../classes/Cherrycake_Module/mapActions.html">mapActions</a>()
                        </li><li>public void <a title="Cherrycake\Module" href="../classes/Cherrycake_Module/addCssAndJavascript.html">addCssAndJavascript</a>()
                        </li><li>public boolean <a title="Cherrycake\Module" href="../classes/Cherrycake_Module/init.html">init</a>()
                        </li><li>public array <a title="Cherrycake\Module" href="../classes/Cherrycake_Module/arrayMergeRecursiveDistinct.html">arrayMergeRecursiveDistinct</a>()
                        </li></ul>

            }<br/></div>
        <h2 id="hierarchy">Hierarchy</h2>
        <div class="styled">
          <h4>Extends</h4>
          <ul>
            <li>
              <a title="Cherrycake\Module" href="../classes/Cherrycake_Module.html">Cherrycake\Module</a>
            </li>
          </ul>
        </div>
        <h2 id="members">Members</h2>
        <div class="styled members">
          <h4>private</h4>
          <ul class="members">
            <li id="sessionData"><strong>$sessionData</strong>
                —
                array</li>
            <li id="sessionId"><strong>$sessionId</strong>
                —
                string</li>
          </ul>
          <h4>protected</h4>
          <ul class="members">
            <li id="config"><strong>$config</strong>
                —
                array</li>
            <li id="dependentAppModules"><strong>$dependentAppModules</strong>
                —
                array</li>
            <li id="dependentCherrycakeModules"><strong>$dependentCherrycakeModules</strong>
                —
                array</li>
            <li id="isConfigFile"><strong>$isConfigFile</strong>
                —
                <a title="Cherrycake\bool" href="../classes/Cherrycake_bool.html">Cherrycake\bool</a></li>
          </ul>
          <h4>public</h4>
          <ul class="members">
            <li id="config"><strong>$config</strong>
                —
                array</li>
            <li id="dependentCherrycakeModules"><strong>$dependentCherrycakeModules</strong>
                —
                array</li>
          </ul>
        </div>
        <h2 id="methods">Methods</h2>
        <div class="styled">
          <h4>public</h4>
          <ul>
            <li id="__get"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/__get.html">__get()</a>
                — Magic get method to return the an item in the session</li>
            <li id="__isset"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/__isset.html">__isset()</a>
                — Magic method to check if the item $key has been set in the session</li>
            <li id="__set"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/__set.html">__set()</a>
                — Magic set method to set the item $key to the given $value in the session</li>
            <li id="debug"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/debug.html">debug()</a>
                — debug</li>
            <li id="generateNewSessionId"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/generateNewSessionId.html">generateNewSessionId()</a>
                — generateNewSessionId</li>
            <li id="getClientBrowserString"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getClientBrowserString.html">getClientBrowserString()</a>
                — getClientBrowserString</li>
            <li id="getClientIp">
              <a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getClientIp.html">getClientIp()</a>
            </li>
            <li id="getSessionCacheKey"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getSessionCacheKey.html">getSessionCacheKey()</a>
                — getSessionCacheKey</li>
            <li id="getSessionData"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getSessionData.html">getSessionData()</a>
                — getSessionData</li>
            <li id="getSessionId"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/getSessionId.html">getSessionId()</a>
                — getSessionId</li>
            <li id="init"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/init.html">init()</a>
                — init</li>
            <li id="isSession"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/isSession.html">isSession()</a>
                — isSession</li>
            <li id="isSessionData"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/isSessionData.html">isSessionData()</a>
                — Checks whether a session data has been set or not</li>
            <li id="isSessionExistsOnCache"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/isSessionExistsOnCache.html">isSessionExistsOnCache()</a>
                — isSessionExistsOnCache</li>
            <li id="loadSessionCookie"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/loadSessionCookie.html">loadSessionCookie()</a>
                — loadSessionCookie</li>
            <li id="loadSessionData"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/loadSessionData.html">loadSessionData()</a>
                — loadSessionData</li>
            <li id="newSession"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/newSession.html">newSession()</a>
                — newSession</li>
            <li id="removeSessionCookie"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/removeSessionCookie.html">removeSessionCookie()</a>
                — removeSessionCookie</li>
            <li id="removeSessionData"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/removeSessionData.html">removeSessionData()</a>
                — removeSessionData</li>
            <li id="renewSessionCookie"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/renewSessionCookie.html">renewSessionCookie()</a>
                — renewSessionCookie</li>
            <li id="resetSessionCache"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/resetSessionCache.html">resetSessionCache()</a>
                — resetSessionCache</li>
            <li id="sendSessionCookie"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/sendSessionCookie.html">sendSessionCookie()</a>
                — sendSessionCookie</li>
            <li id="setSessionData"><a title="Cherrycake\Modules\Session" href="../classes/Cherrycake_Modules_Session/setSessionData.html">setSessionData()</a>
                — setSessionData</li>
          </ul>
          <h3>Inherited from <a title="Cherrycake\Module" href="../classes/Cherrycake_Module.html">Cherrycake\Module</a></h3>
          <h4>public</h4>
          <ul>
            <li id="addCssAndJavascript"><a title="Cherrycake\Module" href="../classes/Cherrycake_Module/addCssAndJavascript.html">addCssAndJavascript()</a>
                — addCssAndJavascript</li>
            <li id="arrayMergeRecursiveDistinct"><a title="Cherrycake\Module" href="../classes/Cherrycake_Module/arrayMergeRecursiveDistinct.html">arrayMergeRecursiveDistinct()</a>
                — arrayMergeRecursiveDistinct</li>
            <li id="config"><a title="Cherrycake\Module" href="../classes/Cherrycake_Module/config.html">config()</a>
                — config</li>
            <li id="getConfig"><a title="Cherrycake\Module" href="../classes/Cherrycake_Module/getConfig.html">getConfig()</a>
                — getConfig</li>
            <li id="init"><a title="Cherrycake\Module" href="../classes/Cherrycake_Module/init.html">init()</a>
                — init</li>
            <li id="loadConfigFile"><a title="Cherrycake\Module" href="../classes/Cherrycake_Module/loadConfigFile.html">loadConfigFile()</a>
                — loadConfigFile</li>
            <li id="loadDependencies"><a title="Cherrycake\Module" href="../classes/Cherrycake_Module/loadDependencies.html">loadDependencies()</a>
                — loadDependencies</li>
            <li id="mapActions"><a title="Cherrycake\Module" href="../classes/Cherrycake_Module/mapActions.html">mapActions()</a>
                — mapActions</li>
            <li id="setConfig"><a title="Cherrycake\Module" href="../classes/Cherrycake_Module/setConfig.html">setConfig()</a>
                — setConfig</li>
          </ul>
        </div>
      </section>
    </div>
    <footer>
      <span>Generated using phpDox 0.9.0 - Copyright (C) 2010 - 2018 by Arne Blankerts</span>
    </footer>
  </body>
</html>
