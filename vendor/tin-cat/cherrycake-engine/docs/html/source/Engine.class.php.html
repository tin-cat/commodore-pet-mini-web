<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:pu="http://schema.phpunit.de/coverage/1.0" lang="en"><head><title>phpDox - Source of Engine.class.php</title><link rel="stylesheet" type="text/css" href="../css/style.css" media="screen"/><link rel="stylesheet" href="../css/source.css"/><meta http-equiv="content-type" content="text/html; charset=utf-8"/></head><body><nav class="topnav"><ul><li><div class="logo"><span>/**</span>phpDox</div></li><li class="separator"><a href="../index.html">Overview</a></li><li class="separator"><a href="../namespaces.html">Namespaces</a></li><li><a href="../interfaces.html">Interfaces</a></li><li><a href="../classes.html">Classes</a></li><li class="separator"><a href="../source/index.html">Source</a></li></ul></nav><div id="mainstage"><div class="box"><ul class="breadcrumb"><li><a href="../index.html">Overview</a></li><li class="separator"><a href="../source/index.html">Source</a></li></ul></div><h1>Source of file Engine.class.php</h1><p>
                        Size: 7,872 Bytes - Last Modified: 2018-09-09T09:36:04+00:00</p><section><h2><small>/var/www/lib/cherrycake/</small>Engine.class.php</h2><table class="source"><tr><td class="no"><a class="anker" href="#line1">1</a><a class="anker" href="#line2">2</a><a class="anker" href="#line3">3</a><a class="anker" href="#line4">4</a><a class="anker" href="#line5">5</a><a class="anker" href="#line6">6</a><a class="anker" href="#line7">7</a><a class="anker" href="#line8">8</a><a class="anker" href="#line9">9</a><a class="anker" href="#line10">10</a><a class="anker" href="#line11">11</a><a class="anker" href="#line12">12</a><a class="anker" href="#line13">13</a><a class="anker" href="#line14">14</a><a class="anker" href="#line15">15</a><a class="anker" href="#line16">16</a><a class="anker" href="#line17">17</a><a class="anker" href="#line18">18</a><a class="anker" href="#line19">19</a><a class="anker" href="#line20">20</a><a class="anker" href="#line21">21</a><a class="anker" href="#line22">22</a><a class="anker" href="#line23">23</a><a class="anker" href="#line24">24</a><a class="anker" href="#line25">25</a><a class="anker" href="#line26">26</a><a class="anker" href="#line27">27</a><a class="anker" href="#line28">28</a><a class="anker" href="#line29">29</a><a class="anker" href="#line30">30</a><a class="anker" href="#line31">31</a><a class="anker" href="#line32">32</a><a class="anker" href="#line33">33</a><a class="anker" href="#line34">34</a><a class="anker" href="#line35">35</a><a class="anker" href="#line36">36</a><a class="anker" href="#line37">37</a><a class="anker" href="#line38">38</a><a class="anker" href="#line39">39</a><a class="anker" href="#line40">40</a><a class="anker" href="#line41">41</a><a class="anker" href="#line42">42</a><a class="anker" href="#line43">43</a><a class="anker" href="#line44">44</a><a class="anker" href="#line45">45</a><a class="anker" href="#line46">46</a><a class="anker" href="#line47">47</a><a class="anker" href="#line48">48</a><a class="anker" href="#line49">49</a><a class="anker" href="#line50">50</a><a class="anker" href="#line51">51</a><a class="anker" href="#line52">52</a><a class="anker" href="#line53">53</a><a class="anker" href="#line54">54</a><a class="anker" href="#line55">55</a><a class="anker" href="#line56">56</a><a class="anker" href="#line57">57</a><a class="anker" href="#line58">58</a><a class="anker" href="#line59">59</a><a class="anker" href="#line60">60</a><a class="anker" href="#line61">61</a><a class="anker" href="#line62">62</a><a class="anker" href="#line63">63</a><a class="anker" href="#line64">64</a><a class="anker" href="#line65">65</a><a class="anker" href="#line66">66</a><a class="anker" href="#line67">67</a><a class="anker" href="#line68">68</a><a class="anker" href="#line69">69</a><a class="anker" href="#line70">70</a><a class="anker" href="#line71">71</a><a class="anker" href="#line72">72</a><a class="anker" href="#line73">73</a><a class="anker" href="#line74">74</a><a class="anker" href="#line75">75</a><a class="anker" href="#line76">76</a><a class="anker" href="#line77">77</a><a class="anker" href="#line78">78</a><a class="anker" href="#line79">79</a><a class="anker" href="#line80">80</a><a class="anker" href="#line81">81</a><a class="anker" href="#line82">82</a><a class="anker" href="#line83">83</a><a class="anker" href="#line84">84</a><a class="anker" href="#line85">85</a><a class="anker" href="#line86">86</a><a class="anker" href="#line87">87</a><a class="anker" href="#line88">88</a><a class="anker" href="#line89">89</a><a class="anker" href="#line90">90</a><a class="anker" href="#line91">91</a><a class="anker" href="#line92">92</a><a class="anker" href="#line93">93</a><a class="anker" href="#line94">94</a><a class="anker" href="#line95">95</a><a class="anker" href="#line96">96</a><a class="anker" href="#line97">97</a><a class="anker" href="#line98">98</a><a class="anker" href="#line99">99</a><a class="anker" href="#line100">100</a><a class="anker" href="#line101">101</a><a class="anker" href="#line102">102</a><a class="anker" href="#line103">103</a><a class="anker" href="#line104">104</a><a class="anker" href="#line105">105</a><a class="anker" href="#line106">106</a><a class="anker" href="#line107">107</a><a class="anker" href="#line108">108</a><a class="anker" href="#line109">109</a><a class="anker" href="#line110">110</a><a class="anker" href="#line111">111</a><a class="anker" href="#line112">112</a><a class="anker" href="#line113">113</a><a class="anker" href="#line114">114</a><a class="anker" href="#line115">115</a><a class="anker" href="#line116">116</a><a class="anker" href="#line117">117</a><a class="anker" href="#line118">118</a><a class="anker" href="#line119">119</a><a class="anker" href="#line120">120</a><a class="anker" href="#line121">121</a><a class="anker" href="#line122">122</a><a class="anker" href="#line123">123</a><a class="anker" href="#line124">124</a><a class="anker" href="#line125">125</a><a class="anker" href="#line126">126</a><a class="anker" href="#line127">127</a><a class="anker" href="#line128">128</a><a class="anker" href="#line129">129</a><a class="anker" href="#line130">130</a><a class="anker" href="#line131">131</a><a class="anker" href="#line132">132</a><a class="anker" href="#line133">133</a><a class="anker" href="#line134">134</a><a class="anker" href="#line135">135</a><a class="anker" href="#line136">136</a><a class="anker" href="#line137">137</a><a class="anker" href="#line138">138</a><a class="anker" href="#line139">139</a><a class="anker" href="#line140">140</a><a class="anker" href="#line141">141</a><a class="anker" href="#line142">142</a><a class="anker" href="#line143">143</a><a class="anker" href="#line144">144</a><a class="anker" href="#line145">145</a><a class="anker" href="#line146">146</a><a class="anker" href="#line147">147</a><a class="anker" href="#line148">148</a><a class="anker" href="#line149">149</a><a class="anker" href="#line150">150</a><a class="anker" href="#line151">151</a><a class="anker" href="#line152">152</a><a class="anker" href="#line153">153</a><a class="anker" href="#line154">154</a><a class="anker" href="#line155">155</a><a class="anker" href="#line156">156</a><a class="anker" href="#line157">157</a><a class="anker" href="#line158">158</a><a class="anker" href="#line159">159</a><a class="anker" href="#line160">160</a><a class="anker" href="#line161">161</a><a class="anker" href="#line162">162</a><a class="anker" href="#line163">163</a><a class="anker" href="#line164">164</a><a class="anker" href="#line165">165</a><a class="anker" href="#line166">166</a><a class="anker" href="#line167">167</a><a class="anker" href="#line168">168</a><a class="anker" href="#line169">169</a><a class="anker" href="#line170">170</a><a class="anker" href="#line171">171</a><a class="anker" href="#line172">172</a><a class="anker" href="#line173">173</a><a class="anker" href="#line174">174</a><a class="anker" href="#line175">175</a><a class="anker" href="#line176">176</a><a class="anker" href="#line177">177</a><a class="anker" href="#line178">178</a><a class="anker" href="#line179">179</a><a class="anker" href="#line180">180</a><a class="anker" href="#line181">181</a><a class="anker" href="#line182">182</a><a class="anker" href="#line183">183</a><a class="anker" href="#line184">184</a><a class="anker" href="#line185">185</a><a class="anker" href="#line186">186</a><a class="anker" href="#line187">187</a><a class="anker" href="#line188">188</a><a class="anker" href="#line189">189</a><a class="anker" href="#line190">190</a><a class="anker" href="#line191">191</a><a class="anker" href="#line192">192</a><a class="anker" href="#line193">193</a><a class="anker" href="#line194">194</a><a class="anker" href="#line195">195</a><a class="anker" href="#line196">196</a><a class="anker" href="#line197">197</a><a class="anker" href="#line198">198</a><a class="anker" href="#line199">199</a><a class="anker" href="#line200">200</a><a class="anker" href="#line201">201</a><a class="anker" href="#line202">202</a><a class="anker" href="#line203">203</a><a class="anker" href="#line204">204</a><a class="anker" href="#line205">205</a><a class="anker" href="#line206">206</a><a class="anker" href="#line207">207</a><a class="anker" href="#line208">208</a><a class="anker" href="#line209">209</a><a class="anker" href="#line210">210</a><a class="anker" href="#line211">211</a><a class="anker" href="#line212">212</a><a class="anker" href="#line213">213</a><a class="anker" href="#line214">214</a><a class="anker" href="#line215">215</a><a class="anker" href="#line216">216</a><a class="anker" href="#line217">217</a><a class="anker" href="#line218">218</a><a class="anker" href="#line219">219</a><a class="anker" href="#line220">220</a><a class="anker" href="#line221">221</a><a class="anker" href="#line222">222</a><a class="anker" href="#line223">223</a><a class="anker" href="#line224">224</a><a class="anker" href="#line225">225</a><a class="anker" href="#line226">226</a><a class="anker" href="#line227">227</a><a class="anker" href="#line228">228</a><a class="anker" href="#line229">229</a><a class="anker" href="#line230">230</a><a class="anker" href="#line231">231</a><a class="anker" href="#line232">232</a><a class="anker" href="#line233">233</a><a class="anker" href="#line234">234</a><a class="anker" href="#line235">235</a><a class="anker" href="#line236">236</a><a class="anker" href="#line237">237</a><a class="anker" href="#line238">238</a><a class="anker" href="#line239">239</a><a class="anker" href="#line240">240</a></td><td class="line"><div id="line1"><pre><span class="token T_OPEN_TAG">&lt;?php</span></pre></div><div id="line2"><br/></div><div id="line3"><pre><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line4"><pre><span class="token T_DOC_COMMENT"> * Engine</span></pre></div><div id="line5"><pre><span class="token T_DOC_COMMENT"> *</span></pre></div><div id="line6"><pre><span class="token T_DOC_COMMENT"> * @package Cherrycake</span></pre></div><div id="line7"><pre><span class="token T_DOC_COMMENT"> */</span></pre></div><div id="line8"><br/></div><div id="line9"><pre><span class="token T_NAMESPACE">namespace</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">Cherrycake</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line10"><br/></div><div id="line11"><pre><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line12"><pre><span class="token T_DOC_COMMENT"> * Engine</span></pre></div><div id="line13"><pre><span class="token T_DOC_COMMENT"> *</span></pre></div><div id="line14"><pre><span class="token T_DOC_COMMENT"> * The main class that loads modules and configurations, and the entry point of the application.</span></pre></div><div id="line15"><pre><span class="token T_DOC_COMMENT"> * Cherrycake uses global variables for configuring modules and global configuration, be sure to set "register_globals" to "off" in php.ini to avoid security issues.</span></pre></div><div id="line16"><pre><span class="token T_DOC_COMMENT"> *</span></pre></div><div id="line17"><pre><span class="token T_DOC_COMMENT"> * @package Cherrycake</span></pre></div><div id="line18"><pre><span class="token T_DOC_COMMENT"> * @category Main</span></pre></div><div id="line19"><pre><span class="token T_DOC_COMMENT"> */</span></pre></div><div id="line20"><pre><span class="token T_CLASS">class</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">Engine</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line21"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line22"><pre><span class="token T_DOC_COMMENT">	 * @var string $appNamespace Holds the namespace for the specific App, it is set in the Init method</span></pre></div><div id="line23"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line24"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PRIVATE">private</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$appNamespace</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line25"><br/></div><div id="line26"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line27"><pre><span class="token T_DOC_COMMENT">	 * @var array $loadedModules Stores the names of all included modules</span></pre></div><div id="line28"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line29"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PRIVATE">private</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$loadedModules</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line30"><br/></div><div id="line31"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line32"><pre><span class="token T_DOC_COMMENT">	 * init</span></pre></div><div id="line33"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line34"><pre><span class="token T_DOC_COMMENT">	 * Initializes the engine</span></pre></div><div id="line35"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line36"><pre><span class="token T_DOC_COMMENT">	 * Setup keys:</span></pre></div><div id="line37"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line38"><pre><span class="token T_DOC_COMMENT">	 * * namespace: Specifies the App namespace</span></pre></div><div id="line39"><pre><span class="token T_DOC_COMMENT">	 * * baseCherrycakeModules: An ordered array of the base Cherrycake module names that has to be always loaded on application start. These must include an "actions" modules that will later determine the action to take based on the received query, thus loading the additional required modules to do so.</span></pre></div><div id="line40"><pre><span class="token T_DOC_COMMENT">	 * * additionalAppConfigFiles: An ordered array of any additional App config files to load that are found under the App config directory</span></pre></div><div id="line41"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line42"><pre><span class="token T_DOC_COMMENT">	 * @param array $setup The initial engine configuration information.</span></pre></div><div id="line43"><pre><span class="token T_DOC_COMMENT">	 * @return boolean Whether all the modules have been loaded ok</span></pre></div><div id="line44"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line45"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">init</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$setup</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line46"><pre><span class="token T_WHITESPACE">		</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">isUnderMaintenance</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line47"><pre><span class="token T_WHITESPACE">			</span><span class="token T_STRING">header</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"HTTP/1.1 503 Service Temporarily Unavailable"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line48"><pre><span class="token T_WHITESPACE">			</span><span class="token T_ECHO">echo</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">file_get_contents</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"errors/maintenance.html"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line49"><pre><span class="token T_WHITESPACE">			</span><span class="token T_EXIT">die</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line50"><pre><span class="token T_WHITESPACE">		</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line51"><pre><span class="token T_WHITESPACE">		</span></pre></div><div id="line52"><pre><span class="token T_WHITESPACE">		</span><span class="token T_STRING">date_default_timezone_set</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">TIMEZONENAME</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line53"><br/></div><div id="line54"><pre><span class="token T_WHITESPACE">		</span><span class="token T_REQUIRE">require</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">LIB_DIR</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/module.class.php"</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line55"><br/></div><div id="line56"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">appNamespace</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$setup</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span><span class="token T_CONSTANT_ENCAPSED_STRING">"namespace"</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line57"><br/></div><div id="line58"><pre><span class="token T_WHITESPACE">		</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$setup</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span><span class="token T_CONSTANT_ENCAPSED_STRING">"additionalAppConfigFiles"</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line59"><pre><span class="token T_WHITESPACE">			</span><span class="token T_FOREACH">foreach</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$setup</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span><span class="token T_CONSTANT_ENCAPSED_STRING">"additionalAppConfigFiles"</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_WHITESPACE"> </span><span class="token T_AS">as</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$additionalAppConfigFile</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line60"><pre><span class="token T_WHITESPACE">				</span><span class="token T_REQUIRE">require</span><span class="token T_WHITESPACE"> </span><span class="token T_CONSTANT_ENCAPSED_STRING">"config/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$additionalAppConfigFile</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line61"><br/></div><div id="line62"><pre><span class="token T_WHITESPACE">		</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$setup</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span><span class="token T_CONSTANT_ENCAPSED_STRING">"baseCherrycakeModules"</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line63"><pre><span class="token T_WHITESPACE">			</span><span class="token T_FOREACH">foreach</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$setup</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span><span class="token T_CONSTANT_ENCAPSED_STRING">"baseCherrycakeModules"</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_WHITESPACE"> </span><span class="token T_AS">as</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$module</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line64"><pre><span class="token T_WHITESPACE">				</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_EXCLAMATION_MARK">!</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">loadCherrycakeModule</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$module</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line65"><pre><span class="token T_WHITESPACE">					</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">false</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line66"><br/></div><div id="line67"><pre><span class="token T_WHITESPACE">		</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">true</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line68"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line69"><br/></div><div id="line70"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line71"><pre><span class="token T_DOC_COMMENT">	 * getAppNamespace</span></pre></div><div id="line72"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line73"><pre><span class="token T_DOC_COMMENT">	 * @return string The namespace used by the App</span></pre></div><div id="line74"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line75"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">getAppNamespace</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line76"><pre><span class="token T_WHITESPACE">		</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">appNamespace</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line77"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line78"><br/></div><div id="line79"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line80"><pre><span class="token T_DOC_COMMENT">	 * loadCherrycakeModule</span></pre></div><div id="line81"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line82"><pre><span class="token T_DOC_COMMENT">	 * Specific method to load a Cherrycake module. Cherrycake modules are classes extending the module class that provide engine-specific functionalities.</span></pre></div><div id="line83"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line84"><pre><span class="token T_DOC_COMMENT">	 * @param string $moduleName The name of the module to load</span></pre></div><div id="line85"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line86"><pre><span class="token T_DOC_COMMENT">	 * @return boolean Whether the module has been loaded ok</span></pre></div><div id="line87"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line88"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">loadCherrycakeModule</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line89"><pre><span class="token T_WHITESPACE">		</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">loadModule</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">LIB_DIR</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/modules"</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">CONFIG_DIR</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_NS_C">__NAMESPACE__</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line90"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line91"><br/></div><div id="line92"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line93"><pre><span class="token T_DOC_COMMENT">	 * loadAppModule</span></pre></div><div id="line94"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line95"><pre><span class="token T_DOC_COMMENT">	 * Specific method to load an application-specific module. App modules are classes extending the module class that provide app-specific functionalities.</span></pre></div><div id="line96"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line97"><pre><span class="token T_DOC_COMMENT">	 * @param string $moduleName The name of the module to load</span></pre></div><div id="line98"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line99"><pre><span class="token T_DOC_COMMENT">	 * @return boolean Whether the module has been loaded ok</span></pre></div><div id="line100"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line101"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">loadAppModule</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line102"><pre><span class="token T_WHITESPACE">		</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">loadModule</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">APP_MODULES_DIR</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">CONFIG_DIR</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">appNamespace</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line103"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line104"><br/></div><div id="line105"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line106"><pre><span class="token T_DOC_COMMENT">	 * loadModule</span></pre></div><div id="line107"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line108"><pre><span class="token T_DOC_COMMENT">	 * Generic method to load a module. Modules are classes extending the module class providing specific functionalities in a modular-type framework. Module can have its own configuration file.</span></pre></div><div id="line109"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line110"><pre><span class="token T_DOC_COMMENT">	 * @param string $modulesDirectory Directory where modules are stored</span></pre></div><div id="line111"><pre><span class="token T_DOC_COMMENT">	 * @param string $configDirectory Directory where module configuration files are stored with the syntax [module name].config.php</span></pre></div><div id="line112"><pre><span class="token T_DOC_COMMENT">	 * @param string $moduleName The name of the module to load</span></pre></div><div id="line113"><pre><span class="token T_DOC_COMMENT">	 * @param string $namespace The namespace of the module</span></pre></div><div id="line114"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line115"><pre><span class="token T_DOC_COMMENT">	 * @return boolean Whether the module has been loaded and initted ok</span></pre></div><div id="line116"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line117"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">loadModule</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$modulesDirectory</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$configDirectory</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$namespace</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line118"><pre><span class="token T_WHITESPACE">		</span><span class="token T_COMMENT">// Avoids a module to be loaded more than once</span></pre></div><div id="line119"><pre><span class="token T_WHITESPACE">		</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">is_array</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">loadedModules</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_BOOLEAN_AND">&amp;&amp;</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">in_array</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">loadedModules</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line120"><pre><span class="token T_WHITESPACE">			</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">true</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line121"><br/></div><div id="line122"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">loadedModules</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line123"><br/></div><div id="line124"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">includeModuleClass</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$modulesDirectory</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span><span class="token T_WHITESPACE">		</span></pre></div><div id="line125"><br/></div><div id="line126"><pre><span class="token T_WHITESPACE">		</span><span class="token T_EVAL">eval</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"\$this-&gt;"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">" = new \\"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$namespace</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"\\Modules\\"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"();"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line127"><br/></div><div id="line128"><pre><span class="token T_WHITESPACE">		</span><span class="token T_IF">if</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_EXCLAMATION_MARK">!</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">init</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line129"><pre><span class="token T_WHITESPACE">			</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">end</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line130"><pre><span class="token T_WHITESPACE">			</span><span class="token T_EXIT">die</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line131"><pre><span class="token T_WHITESPACE">		</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line132"><br/></div><div id="line133"><pre><span class="token T_WHITESPACE">		</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">true</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line134"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line135"><br/></div><div id="line136"><pre><span class="token T_WHITESPACE">	</span><span class="token T_COMMENT">/*</span></pre></div><div id="line137"><pre><span class="token T_COMMENT">	 * includeModuleClass</span></pre></div><div id="line138"><pre><span class="token T_COMMENT">	 *</span></pre></div><div id="line139"><pre><span class="token T_COMMENT">	 * Generic method to include a module class</span></pre></div><div id="line140"><pre><span class="token T_COMMENT">	 *</span></pre></div><div id="line141"><pre><span class="token T_COMMENT">	 * @param string $modulesDirectory Directory where modules are stored</span></pre></div><div id="line142"><pre><span class="token T_COMMENT">	 * @param string $moduleName The name of the module whose class must be included</span></pre></div><div id="line143"><pre><span class="token T_COMMENT">	 */</span></pre></div><div id="line144"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">includeModuleClass</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$modulesDirectory</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line145"><pre><span class="token T_WHITESPACE">		</span><span class="token T_INCLUDE_ONCE">include_once</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$modulesDirectory</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">".class.php"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line146"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line147"><br/></div><div id="line148"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line149"><pre><span class="token T_DOC_COMMENT">	 * loadCherrycakeClass</span></pre></div><div id="line150"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line151"><pre><span class="token T_DOC_COMMENT">	 * Loads a Cherrycake-specific class. Cherrycake classes are any other classes that are not modules, nor related to any Cherrycake module.</span></pre></div><div id="line152"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line153"><pre><span class="token T_DOC_COMMENT">	 * @param $className The name of the class to load, must be stored in LIB_DIR/[class name].class.php</span></pre></div><div id="line154"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line155"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">loadCherrycakeClass</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line156"><pre><span class="token T_WHITESPACE">		</span><span class="token T_INCLUDE_ONCE">include_once</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">LIB_DIR</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">".class.php"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line157"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line158"><br/></div><div id="line159"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line160"><pre><span class="token T_DOC_COMMENT">	 * loadCherrycakeModuleClass</span></pre></div><div id="line161"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line162"><pre><span class="token T_DOC_COMMENT">	 * Loads a cherrycake-specific class. Cherrycake module classes are any other classes that are not modules, but related to a Cherrycake module.</span></pre></div><div id="line163"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line164"><pre><span class="token T_DOC_COMMENT">	 * @param $moduleName The name of the module to which the class belongs</span></pre></div><div id="line165"><pre><span class="token T_DOC_COMMENT">	 * @param $className The name of the class</span></pre></div><div id="line166"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line167"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">loadCherrycakeModuleClass</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line168"><pre><span class="token T_WHITESPACE">		</span><span class="token T_INCLUDE_ONCE">include_once</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">LIB_DIR</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/modules/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">".class.php"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line169"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line170"><br/></div><div id="line171"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line172"><pre><span class="token T_DOC_COMMENT">	 * loadAppClass</span></pre></div><div id="line173"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line174"><pre><span class="token T_DOC_COMMENT">	 * Loads an app-specific class. App classes are any other classes that are not directly related to a module.</span></pre></div><div id="line175"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line176"><pre><span class="token T_DOC_COMMENT">	 * @param string $className The name of the class to load, must be stored in APP_CLASSES_DIR/[class name].class.php</span></pre></div><div id="line177"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line178"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">loadAppClass</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line179"><pre><span class="token T_WHITESPACE">		</span><span class="token T_INCLUDE_ONCE">include_once</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">APP_CLASSES_DIR</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">".class.php"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line180"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line181"><br/></div><div id="line182"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line183"><pre><span class="token T_DOC_COMMENT">	 * loadAppModuleClass</span></pre></div><div id="line184"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line185"><pre><span class="token T_DOC_COMMENT">	 * Loads an app-module specific class. App module classes are classes that do not extend the module class but provide functionalities related to a module.</span></pre></div><div id="line186"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line187"><pre><span class="token T_DOC_COMMENT">	 * @param string $moduleName The name of the module to which the class belongs</span></pre></div><div id="line188"><pre><span class="token T_DOC_COMMENT">	 * @param string $className The name of the class</span></pre></div><div id="line189"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line190"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">loadAppModuleClass</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line191"><pre><span class="token T_WHITESPACE">		</span><span class="token T_INCLUDE_ONCE">include_once</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">APP_MODULES_DIR</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$moduleName</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">".class.php"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line192"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line193"><br/></div><div id="line194"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line195"><pre><span class="token T_DOC_COMMENT">	 * run</span></pre></div><div id="line196"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line197"><pre><span class="token T_DOC_COMMENT">	 * Starts the application by invoking Actions-&gt;Run</span></pre></div><div id="line198"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line199"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">run</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line200"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Actions</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">run</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line201"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line202"><br/></div><div id="line203"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line204"><pre><span class="token T_DOC_COMMENT">	 * end</span></pre></div><div id="line205"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line206"><pre><span class="token T_DOC_COMMENT">	 * Ends the application by dumping the Output buffer to the client</span></pre></div><div id="line207"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line208"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">end</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line209"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Output</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">sendResponse</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line210"><pre><span class="token T_WHITESPACE">		</span><span class="token T_EXIT">die</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line211"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line212"><pre><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line213"><br/></div><div id="line214"><pre><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line215"><pre><span class="token T_DOC_COMMENT"> * Defines an autoloader for requested classes, to allow the automatic inclusion of class files when they're needed. It distinguishes from Cherrycake classes and App classes by checking the namespace</span></pre></div><div id="line216"><pre><span class="token T_DOC_COMMENT"> */</span></pre></div><div id="line217"><pre><span class="token T_STRING">spl_autoload_register</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line218"><pre><span class="token T_WHITESPACE">	</span><span class="token T_VARIABLE">$namespace</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">strstr</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_CONSTANT_ENCAPSED_STRING">"\\"</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">true</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line219"><br/></div><div id="line220"><pre><span class="token T_WHITESPACE">	</span><span class="token T_COMMENT">// If autoload for Predis namespace is requested, don't do it. Exception for performance only.</span></pre></div><div id="line221"><pre><span class="token T_WHITESPACE">	</span><span class="token T_COMMENT">// This causes the "Predis" namespace name to be forbidden to use when creating a Cherrycake app.</span></pre></div><div id="line222"><pre><span class="token T_WHITESPACE">	</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$namespace</span><span class="token T_WHITESPACE"> </span><span class="token T_IS_EQUAL">==</span><span class="token T_WHITESPACE"> </span><span class="token T_CONSTANT_ENCAPSED_STRING">"Predis"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line223"><pre><span class="token T_WHITESPACE">		</span><span class="token T_RETURN">return</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line224"><br/></div><div id="line225"><pre><span class="token T_WHITESPACE">	</span><span class="token T_VARIABLE">$fileName</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">str_replace</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"\\"</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">substr</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">strstr</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$className</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_CONSTANT_ENCAPSED_STRING">"\\"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_LNUMBER">1</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">".class.php"</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line226"><br/></div><div id="line227"><pre><span class="token T_WHITESPACE">	</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$namespace</span><span class="token T_WHITESPACE"> </span><span class="token T_IS_EQUAL">==</span><span class="token T_WHITESPACE"> </span><span class="token T_CONSTANT_ENCAPSED_STRING">"Cherrycake"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line228"><pre><span class="token T_WHITESPACE">		</span><span class="token T_INCLUDE">include</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">LIB_DIR</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/classes/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$fileName</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line229"><pre><span class="token T_WHITESPACE">	</span><span class="token T_ELSE">else</span></pre></div><div id="line230"><pre><span class="token T_WHITESPACE">	</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">file_exists</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">APP_CLASSES_DIR</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$fileName</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line231"><pre><span class="token T_WHITESPACE">		</span><span class="token T_INCLUDE">include</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">APP_CLASSES_DIR</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">"/"</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$fileName</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line232"><pre><span class="token T_PHPDOX_CLOSE_CURLY">}</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line233"><br/></div><div id="line234"><pre><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line235"><pre><span class="token T_DOC_COMMENT"> * @return bool Whether the app is currently under maintenance or not. Takes also into account the exception IPs</span></pre></div><div id="line236"><pre><span class="token T_DOC_COMMENT"> */</span></pre></div><div id="line237"><pre><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">isUnderMaintenance</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line238"><pre><span class="token T_WHITESPACE">	</span><span class="token T_GLOBAL">global</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$underMaintenanceExceptionIps</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line239"><pre><span class="token T_WHITESPACE">	</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">IS_UNDER_MAINTENANCE</span><span class="token T_WHITESPACE"> </span><span class="token T_BOOLEAN_AND">&amp;&amp;</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EXCLAMATION_MARK">!</span><span class="token T_STRING">in_array</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$_SERVER</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span><span class="token T_CONSTANT_ENCAPSED_STRING">"REMOTE_ADDR"</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$underMaintenanceExceptionIps</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line240"><pre><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div></td></tr></table></section></div><footer><span>Generated using phpDox 0.9.0 - Copyright (C) 2010 - 2018 by Arne Blankerts</span></footer></body></html>
