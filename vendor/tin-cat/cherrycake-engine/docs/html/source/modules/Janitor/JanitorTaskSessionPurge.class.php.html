<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:pu="http://schema.phpunit.de/coverage/1.0" lang="en"><head><title>phpDox - Source of JanitorTaskSessionPurge.class.php</title><link rel="stylesheet" type="text/css" href="../../../css/style.css" media="screen"/><link rel="stylesheet" href="../../../css/source.css"/><meta http-equiv="content-type" content="text/html; charset=utf-8"/></head><body><nav class="topnav"><ul><li><div class="logo"><span>/**</span>phpDox</div></li><li class="separator"><a href="../../../index.html">Overview</a></li><li class="separator"><a href="../../../namespaces.html">Namespaces</a></li><li><a href="../../../interfaces.html">Interfaces</a></li><li><a href="../../../classes.html">Classes</a></li><li class="separator"><a href="../../../source/index.html">Source</a></li></ul></nav><div id="mainstage"><div class="box"><ul class="breadcrumb"><li><a href="../../../index.html">Overview</a></li><li class="separator"><a href="../../../source/index.html">Source</a></li></ul></div><h1>Source of file JanitorTaskSessionPurge.class.php</h1><p>
                        Size: 6,655 Bytes - Last Modified: 2018-09-09T09:36:04+00:00</p><section><h2><small>/var/www/lib/cherrycake/modules/Janitor/</small>JanitorTaskSessionPurge.class.php</h2><table class="source"><tr><td class="no"><a class="anker" href="#line1">1</a><a class="anker" href="#line2">2</a><a class="anker" href="#line3">3</a><a class="anker" href="#line4">4</a><a class="anker" href="#line5">5</a><a class="anker" href="#line6">6</a><a class="anker" href="#line7">7</a><a class="anker" href="#line8">8</a><a class="anker" href="#line9">9</a><a class="anker" href="#line10">10</a><a class="anker" href="#line11">11</a><a class="anker" href="#line12">12</a><a class="anker" href="#line13">13</a><a class="anker" href="#line14">14</a><a class="anker" href="#line15">15</a><a class="anker" href="#line16">16</a><a class="anker" href="#line17">17</a><a class="anker" href="#line18">18</a><a class="anker" href="#line19">19</a><a class="anker" href="#line20">20</a><a class="anker" href="#line21">21</a><a class="anker" href="#line22">22</a><a class="anker" href="#line23">23</a><a class="anker" href="#line24">24</a><a class="anker" href="#line25">25</a><a class="anker" href="#line26">26</a><a class="anker" href="#line27">27</a><a class="anker" href="#line28">28</a><a class="anker" href="#line29">29</a><a class="anker" href="#line30">30</a><a class="anker" href="#line31">31</a><a class="anker" href="#line32">32</a><a class="anker" href="#line33">33</a><a class="anker" href="#line34">34</a><a class="anker" href="#line35">35</a><a class="anker" href="#line36">36</a><a class="anker" href="#line37">37</a><a class="anker" href="#line38">38</a><a class="anker" href="#line39">39</a><a class="anker" href="#line40">40</a><a class="anker" href="#line41">41</a><a class="anker" href="#line42">42</a><a class="anker" href="#line43">43</a><a class="anker" href="#line44">44</a><a class="anker" href="#line45">45</a><a class="anker" href="#line46">46</a><a class="anker" href="#line47">47</a><a class="anker" href="#line48">48</a><a class="anker" href="#line49">49</a><a class="anker" href="#line50">50</a><a class="anker" href="#line51">51</a><a class="anker" href="#line52">52</a><a class="anker" href="#line53">53</a><a class="anker" href="#line54">54</a><a class="anker" href="#line55">55</a><a class="anker" href="#line56">56</a><a class="anker" href="#line57">57</a><a class="anker" href="#line58">58</a><a class="anker" href="#line59">59</a><a class="anker" href="#line60">60</a><a class="anker" href="#line61">61</a><a class="anker" href="#line62">62</a><a class="anker" href="#line63">63</a><a class="anker" href="#line64">64</a><a class="anker" href="#line65">65</a><a class="anker" href="#line66">66</a><a class="anker" href="#line67">67</a><a class="anker" href="#line68">68</a><a class="anker" href="#line69">69</a><a class="anker" href="#line70">70</a><a class="anker" href="#line71">71</a><a class="anker" href="#line72">72</a><a class="anker" href="#line73">73</a><a class="anker" href="#line74">74</a><a class="anker" href="#line75">75</a><a class="anker" href="#line76">76</a><a class="anker" href="#line77">77</a><a class="anker" href="#line78">78</a><a class="anker" href="#line79">79</a><a class="anker" href="#line80">80</a><a class="anker" href="#line81">81</a><a class="anker" href="#line82">82</a><a class="anker" href="#line83">83</a><a class="anker" href="#line84">84</a><a class="anker" href="#line85">85</a><a class="anker" href="#line86">86</a><a class="anker" href="#line87">87</a><a class="anker" href="#line88">88</a><a class="anker" href="#line89">89</a><a class="anker" href="#line90">90</a><a class="anker" href="#line91">91</a><a class="anker" href="#line92">92</a><a class="anker" href="#line93">93</a><a class="anker" href="#line94">94</a><a class="anker" href="#line95">95</a><a class="anker" href="#line96">96</a><a class="anker" href="#line97">97</a><a class="anker" href="#line98">98</a><a class="anker" href="#line99">99</a><a class="anker" href="#line100">100</a><a class="anker" href="#line101">101</a><a class="anker" href="#line102">102</a><a class="anker" href="#line103">103</a><a class="anker" href="#line104">104</a><a class="anker" href="#line105">105</a><a class="anker" href="#line106">106</a><a class="anker" href="#line107">107</a><a class="anker" href="#line108">108</a><a class="anker" href="#line109">109</a><a class="anker" href="#line110">110</a><a class="anker" href="#line111">111</a><a class="anker" href="#line112">112</a><a class="anker" href="#line113">113</a><a class="anker" href="#line114">114</a><a class="anker" href="#line115">115</a><a class="anker" href="#line116">116</a><a class="anker" href="#line117">117</a><a class="anker" href="#line118">118</a><a class="anker" href="#line119">119</a><a class="anker" href="#line120">120</a><a class="anker" href="#line121">121</a><a class="anker" href="#line122">122</a><a class="anker" href="#line123">123</a><a class="anker" href="#line124">124</a><a class="anker" href="#line125">125</a><a class="anker" href="#line126">126</a><a class="anker" href="#line127">127</a><a class="anker" href="#line128">128</a><a class="anker" href="#line129">129</a><a class="anker" href="#line130">130</a><a class="anker" href="#line131">131</a><a class="anker" href="#line132">132</a><a class="anker" href="#line133">133</a><a class="anker" href="#line134">134</a><a class="anker" href="#line135">135</a><a class="anker" href="#line136">136</a><a class="anker" href="#line137">137</a><a class="anker" href="#line138">138</a><a class="anker" href="#line139">139</a><a class="anker" href="#line140">140</a><a class="anker" href="#line141">141</a><a class="anker" href="#line142">142</a><a class="anker" href="#line143">143</a><a class="anker" href="#line144">144</a><a class="anker" href="#line145">145</a><a class="anker" href="#line146">146</a><a class="anker" href="#line147">147</a><a class="anker" href="#line148">148</a><a class="anker" href="#line149">149</a><a class="anker" href="#line150">150</a><a class="anker" href="#line151">151</a><a class="anker" href="#line152">152</a><a class="anker" href="#line153">153</a><a class="anker" href="#line154">154</a><a class="anker" href="#line155">155</a><a class="anker" href="#line156">156</a><a class="anker" href="#line157">157</a><a class="anker" href="#line158">158</a><a class="anker" href="#line159">159</a><a class="anker" href="#line160">160</a><a class="anker" href="#line161">161</a><a class="anker" href="#line162">162</a><a class="anker" href="#line163">163</a><a class="anker" href="#line164">164</a></td><td class="line"><div id="line1"><pre><span class="token T_OPEN_TAG">&lt;?php</span></pre></div><div id="line2"><br/></div><div id="line3"><pre><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line4"><pre><span class="token T_DOC_COMMENT"> * JanitorTaskSession</span></pre></div><div id="line5"><pre><span class="token T_DOC_COMMENT"> *</span></pre></div><div id="line6"><pre><span class="token T_DOC_COMMENT"> * @package Cherrycake</span></pre></div><div id="line7"><pre><span class="token T_DOC_COMMENT"> */</span></pre></div><div id="line8"><br/></div><div id="line9"><pre><span class="token T_NAMESPACE">namespace</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">Cherrycake</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line10"><br/></div><div id="line11"><pre><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line12"><pre><span class="token T_DOC_COMMENT"> * JanitorTaskSession</span></pre></div><div id="line13"><pre><span class="token T_DOC_COMMENT"> *</span></pre></div><div id="line14"><pre><span class="token T_DOC_COMMENT"> * A JanitorTask to maintain the Session module.</span></pre></div><div id="line15"><pre><span class="token T_DOC_COMMENT"> * Purges sessions older than the given seconds. A different configuration is given for differentiating the purging sessions without any data stored (sessions that haven't been used in any way) between sessions with data stored (sessions that have been actually used somehow)</span></pre></div><div id="line16"><pre><span class="token T_DOC_COMMENT"> * To avoid unnecessary database cluttering and minimize session id collision risk.</span></pre></div><div id="line17"><pre><span class="token T_DOC_COMMENT"> *</span></pre></div><div id="line18"><pre><span class="token T_DOC_COMMENT"> * @package Cherrycake</span></pre></div><div id="line19"><pre><span class="token T_DOC_COMMENT"> * @category Classes</span></pre></div><div id="line20"><pre><span class="token T_DOC_COMMENT"> */</span></pre></div><div id="line21"><pre><span class="token T_CLASS">class</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">JanitorTaskSessionPurge</span><span class="token T_WHITESPACE"> </span><span class="token T_EXTENDS">extends</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">JanitorTask</span></pre></div><div id="line22"><pre><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line23"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line24"><pre><span class="token T_DOC_COMMENT">	 * @var bool $isConfig Sets whether this JanitorTask has its own configuration file. Defaults to false.</span></pre></div><div id="line25"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line26"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PROTECTED">protected</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$isConfigFile</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">true</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line27"><br/></div><div id="line28"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line29"><pre><span class="token T_DOC_COMMENT">	 * @var array $config Default configuration options</span></pre></div><div id="line30"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line31"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PROTECTED">protected</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$config</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line32"><pre><span class="token T_WHITESPACE">		</span><span class="token T_CONSTANT_ENCAPSED_STRING">"executionPeriodicity"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">JANITORTASK_EXECUTION_PERIODICITY_EACH_SECONDS</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_COMMENT">// The periodicity for this task execution. One of the available CONSTs. \Cherrycake\Modules\JANITORTASK_EXECUTION_PERIODICITY_ONLY_MANUAL by default.</span></pre></div><div id="line33"><pre><span class="token T_WHITESPACE">		</span><span class="token T_CONSTANT_ENCAPSED_STRING">"periodicityEachSeconds"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_LNUMBER">86400</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_COMMENT">// (86400 = 1 day)</span></pre></div><div id="line34"><pre><span class="token T_WHITESPACE">		</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithoutDataOlderThanSeconds"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_LNUMBER">86400</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_COMMENT">// Sessions older than this seconds without any data will be deleted from the database, since they haven't been actually used (most likely, visits that have bounced the site). (86400 = 1 day)</span></pre></div><div id="line35"><pre><span class="token T_WHITESPACE">		</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithDataOlderThanSeconds"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_LNUMBER">31536000</span><span class="token T_WHITESPACE"> </span><span class="token T_COMMENT">// Sessions older than this seconds _with_ data will be deleted from the database. This should be a lot higher (specially when isSessionRenew in session.config.php for Session module is true) than the session duration in session.config.php (sessionDuration config key), in order to remove sessions that have been used but lasted too long. This is intended mostly to avoid cluttering the database with too many sessions, and to avoid potential session id collisions, which can represent a security risk. (31536000 = 365 days)</span></pre></div><div id="line36"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line37"><br/></div><div id="line38"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line39"><pre><span class="token T_DOC_COMMENT">	 * @var string $name The name of the task</span></pre></div><div id="line40"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line41"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PROTECTED">protected</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$name</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_CONSTANT_ENCAPSED_STRING">"Session purge"</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line42"><br/></div><div id="line43"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line44"><pre><span class="token T_DOC_COMMENT">	 * @var string $description The description of the task</span></pre></div><div id="line45"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line46"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PROTECTED">protected</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$description</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_CONSTANT_ENCAPSED_STRING">"Purges discarded sessions from the Session module"</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line47"><br/></div><div id="line48"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line49"><pre><span class="token T_DOC_COMMENT">	 * getDebugInfo</span></pre></div><div id="line50"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line51"><pre><span class="token T_DOC_COMMENT">	 * Returns a hash array with debug info for this task. Can be overloaded to return additional info, on which case the specific results should be merged with this results with array_merge(parent::getDebugInfo(), &lt;specific debug info array&gt;)</span></pre></div><div id="line52"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line53"><pre><span class="token T_DOC_COMMENT">	 * @return array Hash array with debug info for this task</span></pre></div><div id="line54"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line55"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">getDebugInfo</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line56"><pre><span class="token T_WHITESPACE">		</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">array_merge</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_STRING">parent</span><span class="token T_DOUBLE_COLON">::</span><span class="token T_STRING">getDebugInfo</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line57"><pre><span class="token T_WHITESPACE">			</span><span class="token T_CONSTANT_ENCAPSED_STRING">"PurgeSessionsWithoutDataOlderThanSeconds"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithoutDataOlderThanSeconds"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line58"><pre><span class="token T_WHITESPACE">			</span><span class="token T_CONSTANT_ENCAPSED_STRING">"PurgeSessionsWithDataOlderThanSeconds"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithDataOlderThanSeconds"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line59"><pre><span class="token T_WHITESPACE">		</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line60"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line61"><br/></div><div id="line62"><pre><span class="token T_WHITESPACE">	</span><span class="token T_DOC_COMMENT">/**</span></pre></div><div id="line63"><pre><span class="token T_DOC_COMMENT">	 * run</span></pre></div><div id="line64"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line65"><pre><span class="token T_DOC_COMMENT">	 * Performs the tasks for what this JanitorTask is meant.</span></pre></div><div id="line66"><pre><span class="token T_DOC_COMMENT">	 *</span></pre></div><div id="line67"><pre><span class="token T_DOC_COMMENT">	 * @param integer $baseTimestamp The base timestamp to use for time-based calculations when running this task. Usually, now.</span></pre></div><div id="line68"><pre><span class="token T_DOC_COMMENT">	 * @return array A one-dimensional array with the keys: {&lt;One of JANITORTASK_EXECUTION_RETURN_? consts&gt;, &lt;Task result/error/health check description. Can be an array if different keys of information need to be given.&gt;}</span></pre></div><div id="line69"><pre><span class="token T_DOC_COMMENT">	 */</span></pre></div><div id="line70"><pre><span class="token T_WHITESPACE">	</span><span class="token T_FUNCTION">function</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">run</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$baseTimestamp</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line71"><pre><span class="token T_WHITESPACE">		</span><span class="token T_GLOBAL">global</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$e</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line72"><br/></div><div id="line73"><pre><span class="token T_WHITESPACE">		</span><span class="token T_COMMENT">// Loads the needed modules</span></pre></div><div id="line74"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">loadCherrycakeModule</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Session"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line75"><br/></div><div id="line76"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$databaseProviderName</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Session</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"sessionDatabaseProviderName"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line77"><br/></div><div id="line78"><pre><span class="token T_WHITESPACE">		</span><span class="token T_COMMENT">// Purge sessions older than PurgeSessionsWithoutDataOlderThanSeconds without data</span></pre></div><div id="line79"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$result</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Database</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_VARIABLE">$databaseProviderName</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">prepareAndExecute</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span></pre></div><div id="line80"><pre><span class="token T_WHITESPACE">			</span><span class="token T_CONSTANT_ENCAPSED_STRING">"select count(*) as numberOf from "</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Session</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"sessionTableName"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">" where creationDate &lt; ? and data is null"</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line81"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line82"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line83"><pre><span class="token T_WHITESPACE">					</span><span class="token T_CONSTANT_ENCAPSED_STRING">"type"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">DATABASE_FIELD_TYPE_STRING</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line84"><pre><span class="token T_WHITESPACE">					</span><span class="token T_CONSTANT_ENCAPSED_STRING">"value"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">date</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Y-n-j H:i:s"</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$baseTimestamp</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_MINUS">-</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithoutDataOlderThanSeconds"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line85"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span></pre></div><div id="line86"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span></pre></div><div id="line87"><pre><span class="token T_WHITESPACE">		</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line88"><br/></div><div id="line89"><pre><span class="token T_WHITESPACE">		</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_EXCLAMATION_MARK">!</span><span class="token T_VARIABLE">$result</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line90"><pre><span class="token T_WHITESPACE">			</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line91"><pre><span class="token T_WHITESPACE">				</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">JANITORTASK_EXECUTION_RETURN_ERROR</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line92"><pre><span class="token T_WHITESPACE">				</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Could not query the database"</span></pre></div><div id="line93"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line94"><br/></div><div id="line95"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$row</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$result</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getRow</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line96"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$numberOfSessionsToPurgeWithoutData</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$row</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getField</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"numberOf"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line97"><br/></div><div id="line98"><pre><span class="token T_WHITESPACE">		</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$numberOfSessionsToPurgeWithoutData</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_GT">&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_LNUMBER">0</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line99"><pre><span class="token T_WHITESPACE">			</span><span class="token T_VARIABLE">$result</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Database</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_VARIABLE">$databaseProviderName</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">prepareAndExecute</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span></pre></div><div id="line100"><pre><span class="token T_WHITESPACE">				</span><span class="token T_CONSTANT_ENCAPSED_STRING">"delete from "</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Session</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"sessionTableName"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">" where creationDate &lt; ? and data is null"</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line101"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line102"><pre><span class="token T_WHITESPACE">					</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line103"><pre><span class="token T_WHITESPACE">						</span><span class="token T_CONSTANT_ENCAPSED_STRING">"type"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">DATABASE_FIELD_TYPE_STRING</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line104"><pre><span class="token T_WHITESPACE">						</span><span class="token T_CONSTANT_ENCAPSED_STRING">"value"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">date</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Y-n-j H:i:s"</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$baseTimestamp</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_MINUS">-</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithoutDataOlderThanSeconds"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line105"><pre><span class="token T_WHITESPACE">					</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span></pre></div><div id="line106"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span></pre></div><div id="line107"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line108"><br/></div><div id="line109"><pre><span class="token T_WHITESPACE">			</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_EXCLAMATION_MARK">!</span><span class="token T_VARIABLE">$result</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line110"><pre><span class="token T_WHITESPACE">				</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line111"><pre><span class="token T_WHITESPACE">					</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">JANITORTASK_EXECUTION_RETURN_ERROR</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line112"><pre><span class="token T_WHITESPACE">					</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Could not delete sessions from the database"</span></pre></div><div id="line113"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line114"><pre><span class="token T_WHITESPACE">		</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line115"><br/></div><div id="line116"><br/></div><div id="line117"><pre><span class="token T_WHITESPACE">		</span><span class="token T_COMMENT">// Purge sessions older than PurgeSessionsWithoutDataOlderThanSeconds with data</span></pre></div><div id="line118"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$result</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Database</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_VARIABLE">$databaseProviderName</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">prepareAndExecute</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span></pre></div><div id="line119"><pre><span class="token T_WHITESPACE">			</span><span class="token T_CONSTANT_ENCAPSED_STRING">"select count(*) as numberOf from "</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Session</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"sessionTableName"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">" where creationDate &lt; ? and data is not null"</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line120"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line121"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line122"><pre><span class="token T_WHITESPACE">					</span><span class="token T_CONSTANT_ENCAPSED_STRING">"type"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">DATABASE_FIELD_TYPE_STRING</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line123"><pre><span class="token T_WHITESPACE">					</span><span class="token T_CONSTANT_ENCAPSED_STRING">"value"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">date</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Y-n-j H:i:s"</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$baseTimestamp</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_MINUS">-</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithDataOlderThanSeconds"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line124"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span></pre></div><div id="line125"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span></pre></div><div id="line126"><pre><span class="token T_WHITESPACE">		</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line127"><br/></div><div id="line128"><pre><span class="token T_WHITESPACE">		</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_EXCLAMATION_MARK">!</span><span class="token T_VARIABLE">$result</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line129"><pre><span class="token T_WHITESPACE">			</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line130"><pre><span class="token T_WHITESPACE">				</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">JANITORTASK_EXECUTION_RETURN_ERROR</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line131"><pre><span class="token T_WHITESPACE">				</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Could not query the database"</span></pre></div><div id="line132"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line133"><br/></div><div id="line134"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$row</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$result</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getRow</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line135"><pre><span class="token T_WHITESPACE">		</span><span class="token T_VARIABLE">$numberOfSessionsToPurgeWithData</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$row</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getField</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"numberOf"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line136"><br/></div><div id="line137"><pre><span class="token T_WHITESPACE">		</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_VARIABLE">$numberOfSessionsToPurgeWithData</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_GT">&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_LNUMBER">0</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_CURLY">{</span></pre></div><div id="line138"><pre><span class="token T_WHITESPACE">			</span><span class="token T_VARIABLE">$result</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_EQUAL">=</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Database</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_VARIABLE">$databaseProviderName</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">prepareAndExecute</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span></pre></div><div id="line139"><pre><span class="token T_WHITESPACE">				</span><span class="token T_CONSTANT_ENCAPSED_STRING">"delete from "</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$e</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">Session</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"sessionTableName"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">" where creationDate &lt; ? and data is not null"</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line140"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line141"><pre><span class="token T_WHITESPACE">					</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line142"><pre><span class="token T_WHITESPACE">						</span><span class="token T_CONSTANT_ENCAPSED_STRING">"type"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">DATABASE_FIELD_TYPE_STRING</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line143"><pre><span class="token T_WHITESPACE">						</span><span class="token T_CONSTANT_ENCAPSED_STRING">"value"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_STRING">date</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Y-n-j H:i:s"</span><span class="token T_PHPDOX_COMMA">,</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$baseTimestamp</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_MINUS">-</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithDataOlderThanSeconds"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line144"><pre><span class="token T_WHITESPACE">					</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span></pre></div><div id="line145"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span></pre></div><div id="line146"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line147"><br/></div><div id="line148"><pre><span class="token T_WHITESPACE">			</span><span class="token T_IF">if</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_PHPDOX_EXCLAMATION_MARK">!</span><span class="token T_VARIABLE">$result</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span></pre></div><div id="line149"><pre><span class="token T_WHITESPACE">				</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line150"><pre><span class="token T_WHITESPACE">					</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">JANITORTASK_EXECUTION_RETURN_ERROR</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line151"><pre><span class="token T_WHITESPACE">					</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Could not delete sessions from the database"</span></pre></div><div id="line152"><pre><span class="token T_WHITESPACE">				</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line153"><pre><span class="token T_WHITESPACE">		</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line154"><br/></div><div id="line155"><br/></div><div id="line156"><pre><span class="token T_WHITESPACE">		</span><span class="token T_RETURN">return</span><span class="token T_WHITESPACE"> </span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line157"><pre><span class="token T_WHITESPACE">			</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Cherrycake</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">Modules</span><span class="token T_NS_SEPARATOR">\</span><span class="token T_STRING">JANITORTASK_EXECUTION_RETURN_OK</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line158"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_OPEN_SQUARE">[</span></pre></div><div id="line159"><pre><span class="token T_WHITESPACE">				</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Sessions older than "</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithoutDataOlderThanSeconds"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">" seconds without data purged"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$numberOfSessionsToPurgeWithoutData</span><span class="token T_PHPDOX_COMMA">,</span></pre></div><div id="line160"><pre><span class="token T_WHITESPACE">				</span><span class="token T_CONSTANT_ENCAPSED_STRING">"Sessions older than "</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_VARIABLE">$this</span><span class="token T_OBJECT_OPERATOR">-&gt;</span><span class="token T_STRING">getConfig</span><span class="token T_PHPDOX_OPEN_BRACKET">(</span><span class="token T_CONSTANT_ENCAPSED_STRING">"purgeSessionsWithDataOlderThanSeconds"</span><span class="token T_PHPDOX_CLOSE_BRACKET">)</span><span class="token T_PHPDOX_DOT">.</span><span class="token T_CONSTANT_ENCAPSED_STRING">" seconds with data purged"</span><span class="token T_WHITESPACE"> </span><span class="token T_DOUBLE_ARROW">=&gt;</span><span class="token T_WHITESPACE"> </span><span class="token T_VARIABLE">$numberOfSessionsToPurgeWithData</span></pre></div><div id="line161"><pre><span class="token T_WHITESPACE">			</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span></pre></div><div id="line162"><pre><span class="token T_WHITESPACE">		</span><span class="token T_PHPDOX_CLOSE_SQUARE">]</span><span class="token T_PHPDOX_SEMICOLON">;</span></pre></div><div id="line163"><pre><span class="token T_WHITESPACE">	</span><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div><div id="line164"><pre><span class="token T_PHPDOX_CLOSE_CURLY">}</span></pre></div></td></tr></table></section></div><footer><span>Generated using phpDox 0.9.0 - Copyright (C) 2010 - 2018 by Arne Blankerts</span></footer></body></html>
